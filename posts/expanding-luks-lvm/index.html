<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="How I expanded my LUKS and LV (Logical Volumes) partitions" />
<meta property="og:locale" content="en" />
<meta name="description" content="I used to dual boot in a 1 TB nvme, but it was almost full so I got a new nvme disk of 2TB. And I wanted to use the new disk only for Linux and the old one for Windows." />
<meta property="og:description" content="I used to dual boot in a 1 TB nvme, but it was almost full so I got a new nvme disk of 2TB. And I wanted to use the new disk only for Linux and the old one for Windows." />
<link rel="canonical" href="https://adolfoparra.com/posts/expanding-luks-lvm/" />
<meta property="og:url" content="https://adolfoparra.com/posts/expanding-luks-lvm/" />
<meta property="og:site_name" content="Jesús Adolfo Parra Parra" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-08-08T00:00:00-04:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="How I expanded my LUKS and LV (Logical Volumes) partitions" />
<meta name="twitter:site" content="@4d0lfo" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-08-08T22:53:10-04:00","datePublished":"2025-08-08T00:00:00-04:00","description":"I used to dual boot in a 1 TB nvme, but it was almost full so I got a new nvme disk of 2TB. And I wanted to use the new disk only for Linux and the old one for Windows.","headline":"How I expanded my LUKS and LV (Logical Volumes) partitions","mainEntityOfPage":{"@type":"WebPage","@id":"https://adolfoparra.com/posts/expanding-luks-lvm/"},"url":"https://adolfoparra.com/posts/expanding-luks-lvm/"}</script>
<!-- End Jekyll SEO tag -->


  <title>How I expanded my LUKS and LV (Logical Volumes) partitions | Jesús Adolfo Parra Parra
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Jesús Adolfo Parra Parra">
<meta name="application-name" content="Jesús Adolfo Parra Parra">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- Scripts -->

  <script src="/assets/js/dist/theme.min.js"></script>

  <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script>







<script defer src="/assets/js/dist/post.min.js"></script>



<!-- Pageviews -->

  

  



  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/./images/aboutme.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <a class="site-title d-block" href="/">Jesús Adolfo Parra Parra</a>
    <p class="site-subtitle fst-italic mb-0">A blog dedicated to tech, opensource and gaming</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/zargex"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://twitter.com/4d0lfo"
          aria-label="twitter"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['jesus','adolfoparra.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">Home</a>
            </span>

          
        
          
        
          
            
              <span>How I expanded my LUKS and LV (Logical Volumes) partitions</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link" aria-label="Search">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  

  
  

  




<!-- return -->










<article class="px-1" data-toc="true">
  <header>
    <h1 data-toc-skip>How I expanded my LUKS and LV (Logical Volumes) partitions</h1>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1754625600"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Aug  8, 2025
</time>

      </span>

      <!-- lastmod date -->
      
        <span>
          Updated
          <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1754707990"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Aug  8, 2025
</time>

        </span>
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              <a href="https://twitter.com/4d0lfo">Jesús Adolfo Parra Parra</a>
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="2419 words"
>
  <em>13 min</em> read</span>

        </div>
      </div>
    </div>
  </header>

  
    <div id="toc-bar" class="d-flex align-items-center justify-content-between invisible">
      <span class="label text-truncate">How I expanded my LUKS and LV (Logical Volumes) partitions</span>
      <button type="button" class="toc-trigger btn me-1">
        <i class="fa-solid fa-list-ul fa-fw"></i>
      </button>
    </div>

    <button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm">
      <span class="label ps-2 pe-1">Contents</span>
      <i class="fa-solid fa-angle-right fa-fw"></i>
    </button>

    <dialog id="toc-popup" class="p-0">
      <div class="header d-flex flex-row align-items-center justify-content-between">
        <div class="label text-truncate py-2 ms-4">How I expanded my LUKS and LV (Logical Volumes) partitions</div>
        <button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75">
          <i class="fas fa-close"></i>
        </button>
      </div>
      <div id="toc-popup-content" class="px-4 py-3 pb-4"></div>
    </dialog>
  

  <div class="content">
    <p>I used to dual boot in a 1 TB nvme, but it was almost full so I got a new nvme disk of 2TB.
And I wanted to use the new disk only for Linux and the old one for Windows.</p>

<p><code class="language-plaintext highlighter-rouge">lsblk</code> looked like this:</p>

<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="go">lsblk 
NAME                MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINTS
nvme0n1             259:0    0   1.8T  0 disk  
nvme1n1             259:1    0 931.5G  0 disk  
├─nvme1n1p1         259:2    0   100M  0 part  /boot/efi
├─nvme1n1p2         259:3    0    16M  0 part  
├─nvme1n1p3         259:4    0   200G  0 part  
├─nvme1n1p4         259:5    0     2G  0 part  /boot
├─nvme1n1p5         259:6    0 728.9G  0 part  
│ └─nvme0n1p5_crypt 253:0    0 728.9G  0 crypt 
│   ├─debian-root   253:1    0  83.8G  0 lvm   /
│   └─debian-home   253:2    0 645.1G  0 lvm   /home
└─nvme1n1p6         259:7    0   509M  0 part
</span></pre></td></tr></tbody></table></code></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">nvme0n1</code> was the new one</li>
  <li><code class="language-plaintext highlighter-rouge">nvme1n1</code> was old one</li>
  <li><code class="language-plaintext highlighter-rouge">nvme1n1p5</code> was a LUKS partition and inside it had two LV.</li>
</ul>

<blockquote class="prompt-warning">
  <p>Remember to backup your data first</p>
</blockquote>

<h2 id="preparations-steps"><span class="me-2">Preparations steps</span><a href="#preparations-steps" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>The first thing to do was to create the partitions in the new disk.
As I would clone the older partition, the new ones needed to be at least as big as the old
ones.</p>

<p>To create the partitions I decided to use KDE Partition manager, but any other program
(like <code class="language-plaintext highlighter-rouge">fdisk</code> or <code class="language-plaintext highlighter-rouge">gparted</code>) should have worked just fine.</p>

<p><a href="/assets/img/luks-lvm/Starting.png" class="popup img-link shimmer"><img src="/assets/img/luks-lvm/Starting.png" alt="No partition table" loading="lazy"></a>
<em>The disk was new, there is no partition table</em></p>

<p>I clicked <code class="language-plaintext highlighter-rouge">New Partition Table</code> button. 
Then the <code class="language-plaintext highlighter-rouge">New Partition</code> button on the left to create the partitios I needed.</p>

<p>In the <em>Pending Operation</em> section at the bottom, you can see what the program is about
to do. Finally I clicked <code class="language-plaintext highlighter-rouge">Apply</code>.</p>

<blockquote class="prompt-danger">
  <p>Creating a new table partion will erase your data, make sure you select the correct disk.</p>
</blockquote>

<p>Now it looked like this:</p>

<p><a href="/assets/img/luks-lvm/partitioned.png" class="popup img-link shimmer"><img src="/assets/img/luks-lvm/partitioned.png" alt="New partitions" loading="lazy"></a>
<em>The disk has some partitions now</em></p>

<p>After that, I was ready for the cloning part, I decided to use Rescuezilla which is 
GUI to clonezilla for the task.</p>

<p>First I downloaded the Rescuezilla iso image from <a href="https://rescuezilla.com/download">here</a>. 
Then I needed to burn it in a usb drive, for this I used <code class="language-plaintext highlighter-rouge">balena-etcher</code> <sup id="fnref:balena"><a href="#fn:balena" class="footnote" rel="footnote" role="doc-noteref">1</a></sup> because it is really easy to use.</p>

<p>I only had to unzip the balena zip file and everything I needed is there. To start it I ran <code class="language-plaintext highlighter-rouge">./balena-etcher</code> inside the balena folder.</p>

<p>I selected the iso and the usb drive, this is how it looked.</p>

<p><a href="/assets/img/luks-lvm/balena.png" class="popup img-link shimmer"><img src="/assets/img/luks-lvm/balena.png" alt="Balena-Etcher" loading="lazy"></a>
<em>Balena window</em></p>

<blockquote class="prompt-danger">
  <p>Before flash make sure you select the correct drive.</p>
</blockquote>

<p>Then, clicked flash.</p>

<h2 id="cloning-the-partitions"><span class="me-2">Cloning the partitions</span><a href="#cloning-the-partitions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>The good thing is Rescuezilla is based on Ubuntu, it would be really easy to run any
additional command I could need.</p>

<p>The plan consisted on the following:</p>
<ol>
  <li>Clone the partitions to the new disk.</li>
  <li>Resize the LUKS partition and the VG under it.</li>
  <li>Make sure I can mount the partitions and everything is ok.</li>
  <li>Change the UUID of the old <code class="language-plaintext highlighter-rouge">/boot</code> and the old LUKS, so they won’t be mounted when
I restart my PC.</li>
  <li>Profit!</li>
</ol>

<p>These were the UUID of the old disk</p>
<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="go">nvme1n1                                                                                                            
├─nvme1n1p1         vfat        FAT32                        CA0E-4D9E                                63.3M    34% /boot/efi
├─nvme1n1p2                                                                                                        
├─nvme1n1p3         ntfs                                     D2A60EAEA60E92E1                                      
├─nvme1n1p4         ext4        1.0                          1142f508-b892-4bca-b0cc-ab1accdf9db9      1.3G    26% /boot
├─nvme1n1p5         crypto_LUKS 2                            2a659480-bf29-4944-9d52-6d078bdfd346                  
│ └─nvme0n1p5_crypt LVM2_member LVM2 001                     bPQHVr-kxof-cEZL-0eDN-XYEd-tYQY-PJBY6a                
│   ├─debian-root   ext4        1.0                          274d68b8-66af-4652-a23e-b4e05ce6d4a8     26.1G    63% /
│   └─debian-home   ext4        1.0                          aeeb4963-7f46-4eb8-8353-2b955efcc6f3    240.4G    57% /home
└─nvme1n1p6         ntfs                                     F44234364233FC44                                      
</span></pre></td></tr></tbody></table></code></div></div>
<p>After Rescuezilla booted I was welcome with this:</p>

<p><a href="/assets/img/luks-lvm/Primer-menu.png" class="popup img-link shimmer"><img src="/assets/img/luks-lvm/Primer-menu.png" alt="Rescuezilla Main Menu" loading="lazy"></a>
<em>Rescuezilla Main Menu</em></p>

<ol>
  <li>I clicked <code class="language-plaintext highlighter-rouge">Clone</code></li>
  <li>It asked me for the source and destination disks.</li>
  <li>
    <p>I selected the 3 partitions I wanted to clone and unchecked the <code class="language-plaintext highlighter-rouge">Overwrite the partition table</code> button to be able to select the final partition on the final disk.
<a href="/assets/img/luks-lvm/lista-de-particiones.png" class="popup img-link shimmer"><img src="/assets/img/luks-lvm/lista-de-particiones.png" alt="Rescuezilla partition list" loading="lazy"></a>
<em>Rescuezilla partitions to be cloned</em></p>
  </li>
  <li>I saw the plan and confirmed it.</li>
  <li>I waited while it was doing its work.</li>
  <li>I got an empty window for some reason, but it finished and it showed the summary of the operation.
<a href="/assets/img/luks-lvm/clone-summary.png" class="popup img-link shimmer"><img src="/assets/img/luks-lvm/clone-summary.png" alt="Rescuezilla clone summary" loading="lazy"></a>
<em>Rescuezilla operation summary</em></li>
</ol>

<h2 id="resizing"><span class="me-2">Resizing</span><a href="#resizing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>I proceeded to resize stuff, <code class="language-plaintext highlighter-rouge">lsblk -f</code> showed me this:</p>
<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="go">nvme0n1                                                                                                  
├─nvme0n1p1 vfat        FAT32                        CA0E-4D9E                                           
├─nvme0n1p2 ext4        1.0                          1142f508-b892-4bca-b0cc-ab1accdf9db9                
└─nvme0n1p3 crypto_LUKS 2                            2a659480-bf29-4944-9d52-6d078bdfd346                
nvme1n1                                                                                                  
├─nvme1n1p1 vfat        FAT32                        CA0E-4D9E                                           
├─nvme1n1p2                                                                                              
├─nvme1n1p3 ntfs                                     D2A60EAEA60E92E1                                    
├─nvme1n1p4 ext4        1.0                          1142f508-b892-4bca-b0cc-ab1accdf9db9                
├─nvme1n1p5 crypto_LUKS 2                            2a659480-bf29-4944-9d52-6d078bdfd346                
└─nvme1n1p6 ntfs                                     F44234364233FC44
</span></pre></td></tr></tbody></table></code></div></div>

<p>As expected, the partitions had the same UUID.</p>

<p>First checked the new partitions (<code class="language-plaintext highlighter-rouge">/boot</code> and <code class="language-plaintext highlighter-rouge">/boot/efi</code>)</p>

<h3 id="the-efi-partition"><span class="me-2">The EFI partition</span><a href="#the-efi-partition" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="go">fsck /dev/nvme0n1p1
fsck from util-linux 2.40.2
fsck.fat 4.2 (2021-01-31)
/dev/nvme0n1p1: 192 files, 33451/98304 clusters
</span></pre></td></tr></tbody></table></code></div></div>

<p>I checked the size too:</p>
<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="go">fdisk -s /dev/nvme0n1p1
102400
</span></pre></td></tr></tbody></table></code></div></div>
<p>(102400 / 1024 = 100MiB)</p>

<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="go">fatresize -i /dev/nvme0n1p1
fatresize 1.1.0 (20240401)
part(start=2048, end=206847, length=204800)
FAT: fat32
Cur size: 104857600
Min size: 35128832
Max size: 2000398934016
</span></pre></td></tr></tbody></table></code></div></div>
<p>(104857600 / 1024 = 102400 KiB)</p>

<h3 id="the-boot-partition"><span class="me-2">The boot partition</span><a href="#the-boot-partition" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="go">e2fsck -f /dev/nvme0n1p2 
e2fsck 1.47.1 (20-May-2024)
Pass 1: Checking inodes, blocks, and sizes
Pass 2: Checking directory structure
Pass 3: Checking directory connectivity
Pass 4: Checking reference counts
Pass 5: Checking group summary information
/dev/nvme0n1p2: 358/154880 files (3.1% non-contiguous), 156958/640000 blocks
</span></pre></td></tr></tbody></table></code></div></div>

<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="go">resize2fs /dev/nvme0n1p2 
resize2fs 1.47.1 (20-May-2024)
The filesystem is already 640000 (4k) blocks long.  Nothing to do!
</span></pre></td></tr></tbody></table></code></div></div>

<h3 id="the-luks-partition"><span class="me-2">The LUKS partition</span><a href="#the-luks-partition" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<p>Now the fun part, I really appreciate this answer in <a href="https://unix.stackexchange.com/a/322631">Stackoverflow</a></p>

<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="go">cryptsetup luksOpen /dev/nvme0n1p3 crypt-volume
Enter passphrase for /dev/nvme0n1p3:
</span></pre></td></tr></tbody></table></code></div></div>

<p>It is open:</p>
<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="go">nvme0n1           259:0    0   1.8T  0 disk  
├─nvme0n1p1       259:5    0   100M  0 part  
├─nvme0n1p2       259:6    0   2.4G  0 part  
└─nvme0n1p3       259:7    0   1.8T  0 part  
  └─crypt-volume  252:0    0   1.8T  0 crypt 
    ├─debian-root 252:1    0  83.8G  0 lvm   
    └─debian-home 252:2    0 645.1G  0 lvm   
</span></pre></td></tr></tbody></table></code></div></div>

<p>Looks like Rescuezilla knew this was a LUKS partition because the size was correct.</p>

<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="go">cryptsetup status crypt-volume
/dev/mapper/crypt-volume is active and is in use.
  type:    LUKS2
  cipher:  aes-xts-plain64
  keysize: 512 bits
  key location: keyring
  device:  /dev/nvme0n1p3
  sector size:  512
  offset:  32768 sectors
  size:    3901663232 sectors
  mode:    read/write
</span></pre></td></tr></tbody></table></code></div></div>

<p>Some calculations:
<code class="language-plaintext highlighter-rouge">((((3901663232 * 512) / 1024) / 1024) / 1024) / 1024 = 1.816</code>
which is the right size of the partition in TiB.</p>

<p>So I only needed to change the LV.</p>

<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="gp">root@ubuntu:/#</span><span class="w"> </span>vgs
<span class="gp">  VG     #</span>PV <span class="c">#LV #SN Attr   VSize    VFree</span>
<span class="go">  debian   1   2   0 wz--n- &lt;728.88g    0 
  
</span><span class="gp">root@ubuntu:/#</span><span class="w"> </span>vgchange <span class="nt">-a</span> n debian
<span class="go">0 logical volume(s) in volume group "debian" now active

cryptsetup luksClose crypt-volume
cryptsetup luksOpen /dev/nvme0n1p3 crypt-volume
</span></pre></td></tr></tbody></table></code></div></div>

<blockquote class="prompt-tip">
  <p>To close the LUKS partition, the VG should be deactivated</p>
</blockquote>

<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="gp">#</span><span class="w"> </span>This step did nothing <span class="k">in </span>my <span class="k">case</span>, otherwise it would have expanded the LUKS and
<span class="gp">#</span><span class="w"> </span>gets the free space on the partition.
<span class="go">cryptsetup resize crypt-volume
</span></pre></td></tr></tbody></table></code></div></div>

<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="gp">root@ubuntu:/#</span><span class="w"> </span>vgchange <span class="nt">-a</span> y debian
<span class="go">  2 logical volume(s) in volume group "debian" now active

</span><span class="gp">root@ubuntu:/#</span><span class="w"> </span>pvs
<span class="go">  PV                       VG     Fmt  Attr PSize    PFree
  /dev/mapper/crypt-volume debian lvm2 a--  &lt;728.88g    0 

</span><span class="gp">root@ubuntu:/#</span><span class="w"> </span>pvresize /dev/mapper/crypt-volume 
<span class="go">  Physical volume "/dev/mapper/crypt-volume" changed
  1 physical volume(s) resized or updated / 0 physical volume(s) not resized
  
</span><span class="gp">root@ubuntu:/#</span><span class="w"> </span>pvs
<span class="go">  PV                       VG     Fmt  Attr PSize  PFree 
  /dev/mapper/crypt-volume debian lvm2 a--  &lt;1.82t &lt;1.11t
</span></pre></td></tr></tbody></table></code></div></div>

<p>Resizing using an specific size:</p>
<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="go">lvresize -L 100G /dev/debian/root 
  Size of logical volume debian/root changed from &lt;83.82 GiB (21457 extents) to 100.00 GiB (25600 extents).
  Logical volume debian/root successfully resized.
</span></pre></td></tr></tbody></table></code></div></div>

<p>Resizing using the free space of the whole volume group:</p>
<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="go">lvresize -l +100%FREE /dev/debian/home 
  Size of logical volume debian/home changed from &lt;645.06 GiB (165135 extents) to &lt;1.72 TiB (450677 extents).
  Logical volume debian/home successfully resized.
</span></pre></td></tr></tbody></table></code></div></div>

<p>Then <code class="language-plaintext highlighter-rouge">lsblk</code> showed:</p>
<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="go">└─nvme0n1p3       259:7    0   1.8T  0 part  
  └─crypt-volume  252:0    0   1.8T  0 crypt 
    ├─debian-root 252:1    0   100G  0 lvm   
    └─debian-home 252:2    0   1.7T  0 lvm  
</span></pre></td></tr></tbody></table></code></div></div>

<p>Finally I needed to check and resize the filesystems.</p>

<blockquote class="prompt-info">
  <p>I removed several lines and replaced them with <code class="language-plaintext highlighter-rouge">...</code> to keep it short.</p>
</blockquote>

<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="rouge-code"><pre><span class="gp">root@ubuntu:/#</span><span class="w"> </span>e2fsck <span class="nt">-f</span> /dev/mapper/debian-root 
<span class="go">e2fsck 1.47.1 (20-May-2024)
Pass 1: Checking inodes, blocks, and sizes
</span><span class="gp">Inode 4849689 extent tree (at level 1) could be shorter.  Optimize&lt;y&gt;</span>? <span class="nb">yes</span>
<span class="c">...
</span><span class="gp">Inode 4856185 extent tree (at level 1) could be narrower.  Optimize&lt;y&gt;</span>? <span class="nb">yes</span>
<span class="go">Pass 1E: Optimizing extent trees
Pass 2: Checking directory structure
Pass 3: Checking directory connectivity
Pass 4: Checking reference counts
Pass 5: Checking group summary information

/dev/mapper/debian-root: ***** FILE SYSTEM WAS MODIFIED *****
/dev/mapper/debian-root: 485187/5496832 files (0.5% non-contiguous), 13627683/21971968 blocks

</span><span class="gp">root@ubuntu:/#</span><span class="w"> </span>e2fsck <span class="nt">-f</span> /dev/mapper/debian-home 
<span class="go">e2fsck 1.47.1 (20-May-2024)
Pass 1: Checking inodes, blocks, and sizes
</span><span class="gp">Inode 1574716 extent tree (at level 1) could be narrower.  Optimize&lt;y&gt;</span>? <span class="nb">yes</span>
<span class="c">...
</span><span class="gp">Inode 41039976 extent tree (at level 1) could be shorter.  Optimize&lt;y&gt;</span>? <span class="nb">yes</span>
<span class="go">Pass 1E: Optimizing extent trees
Pass 2: Checking directory structure
Pass 3: Checking directory connectivity
Pass 4: Checking reference counts
Pass 5: Checking group summary information

/dev/mapper/debian-home: ***** FILE SYSTEM WAS MODIFIED *****
/dev/mapper/debian-home: 893701/42278912 files (2.8% non-contiguous), 97611541/169098240 blocks
</span></pre></td></tr></tbody></table></code></div></div>

<p>Note that I used another way to select the device, as it is a symbolic link.</p>
<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="gp">root@ubuntu:/#</span><span class="w"> </span>resize2fs /dev/mapper/debian-root 
<span class="go">resize2fs 1.47.1 (20-May-2024)
Resizing the filesystem on /dev/mapper/debian-root to 26214400 (4k) blocks.
The filesystem on /dev/mapper/debian-root is now 26214400 (4k) blocks long.

</span><span class="gp">root@ubuntu:/#</span><span class="w"> </span>resize2fs /dev/mapper/debian-home 
<span class="go">resize2fs 1.47.1 (20-May-2024)
Resizing the filesystem on /dev/mapper/debian-home to 461493248 (4k) blocks.
The filesystem on /dev/mapper/debian-home is now 461493248 (4k) blocks long.
</span></pre></td></tr></tbody></table></code></div></div>

<h3 id="some-tests"><span class="me-2">Some tests</span><a href="#some-tests" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>
<p>After the resize, I tested them:</p>

<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="go">mount /dev/mapper/debian-root /mnt/test/
</span><span class="gp">root@ubuntu:/#</span><span class="w"> </span><span class="nb">ls</span> /mnt/test/
<span class="go">bin  boot  dev  etc  home  initrd.img  initrd.img.old  lib  lib32  lib64  libx32  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var  vmlinuz  vmlinuz.old
</span></pre></td></tr></tbody></table></code></div></div>

<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="go">mount /dev/mapper/debian-home /mnt/test/
</span><span class="gp">root@ubuntu:/#</span><span class="w"> </span><span class="nb">ls</span> /mnt/test/
<span class="go">adolfo  lost+found

ls /mnt/test/adolfo/ansible-bootstrap/
playbook.yml  templates  test.yaml
</span></pre></td></tr></tbody></table></code></div></div>

<p>Everything looked excellent!</p>

<h2 id="changing-the-uuid"><span class="me-2">Changing the UUID</span><a href="#changing-the-uuid" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<p>Finally I needed to change the UUID of some of the old partitions partitions.
For <code class="language-plaintext highlighter-rouge">/boot</code>, we can use <code class="language-plaintext highlighter-rouge">tune2fs</code> (but first it would need to run <code class="language-plaintext highlighter-rouge">e2fsck</code>)</p>

<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="go">tune2fs -U random /dev/nvme1n1p4 
tune2fs 1.47.1 (20-May-2024)
Setting the UUID on this filesystem could take some time.
</span><span class="gp">Proceed anyway (or wait 5 seconds to proceed) ? (y,N) &lt;proceeding&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></div></div>

<p>For the old LUKS<sup id="fnref:luks-uuid"><a href="#fn:luks-uuid" class="footnote" rel="footnote" role="doc-noteref">2</a></sup> we need to generate an UUID first.</p>
<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="gp">root@ubuntu:/#</span><span class="w"> </span>uuidgen <span class="nt">-r</span>
<span class="go">f8c54c68-5fe1-48c4-b7d5-026c7d4694fc
</span></pre></td></tr></tbody></table></code></div></div>
<p>Next:</p>

<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="go">cryptsetup luksUUID --uuid=f8c54c68-5fe1-48c4-b7d5-026c7d4694fc /dev/nvme1n1p5

WARNING!
========
Do you really want to change UUID of device?

Are you sure? (Type 'yes' in capital letters): YES
</span></pre></td></tr></tbody></table></code></div></div>

<p>It looked like this:</p>
<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="go">nvme0n1                                                                                                         
├─nvme0n1p1      vfat        FAT32                        CA0E-4D9E                                             
├─nvme0n1p2      ext4        1.0                          1142f508-b892-4bca-b0cc-ab1accdf9db9                  
└─nvme0n1p3      crypto_LUKS 2                            2a659480-bf29-4944-9d52-6d078bdfd346                  
  └─crypt-volume LVM2_member LVM2 001                     bPQHVr-kxof-cEZL-0eDN-XYEd-tYQY-PJBY6a                
nvme1n1                                                                                                         
├─nvme1n1p1      vfat        FAT32                        CA0E-4D9E                                             
├─nvme1n1p2                                                                                                     
├─nvme1n1p3      ntfs                                     D2A60EAEA60E92E1                                      
├─nvme1n1p4      ext4        1.0                          7373f983-2ec7-4f56-9866-f82607d4bc61                  
├─nvme1n1p5      crypto_LUKS 2                            f8c54c68-5fe1-48c4-b7d5-026c7d4694fc                  
└─nvme1n1p6      ntfs                                     F44234364233FC44
</span></pre></td></tr></tbody></table></code></div></div>

<p>The old partitions won’t be pick up at boot as they looks different.</p>

<p>Now if everythig was correct, my PC should have be able to boot without caring about which disk it uses, as grub would choose the new <code class="language-plaintext highlighter-rouge">/boot</code> and the booting process would try to unlock the new LUKS.</p>

<h2 id="result"><span class="me-2">Result</span><a href="#result" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Well, it couldn’t boot from the new disk but the old one. At least I was right about that didn’t matter which disk it uses, the system would boot.</p>

<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="go">lsblk 
NAME                MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINTS
nvme0n1             259:0    0   1.8T  0 disk  
├─nvme0n1p1         259:1    0   100M  0 part  
├─nvme0n1p2         259:2    0   2.4G  0 part  /boot
└─nvme0n1p3         259:3    0   1.8T  0 part  
  └─nvme0n1p5_crypt 253:0    0   1.8T  0 crypt 
    ├─debian-root   253:1    0   100G  0 lvm   /
    └─debian-home   253:2    0   1.7T  0 lvm   /home
nvme1n1             259:4    0 931.5G  0 disk  
├─nvme1n1p1         259:5    0   100M  0 part  /boot/efi
├─nvme1n1p2         259:6    0    16M  0 part  
├─nvme1n1p3         259:7    0   200G  0 part  
├─nvme1n1p4         259:8    0     2G  0 part  
├─nvme1n1p5         259:9    0 728.9G  0 part  
└─nvme1n1p6         259:10   0   509M  0 part
</span></pre></td></tr></tbody></table></code></div></div>

<p>I was pretty sure the problem was grub wasn’t installed correctly, so I retried that.</p>

<p>First I needed the line</p>
<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="go">GRUB_DISABLE_OS_PROBER=false
</span></pre></td></tr></tbody></table></code></div></div>
<p>in my <code class="language-plaintext highlighter-rouge">/etc/default/grub</code> because I wanted grub to detect Windows automatically.</p>

<p>Then I unmounted the old EFI partition and mounted the new one.</p>

<div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>adolfo@debian-desktop:~/Projects/webpage$ sudo umount /boot/efi
adolfo@debian-desktop:~/Projects/webpage$ sudo mount /dev/nvme0n1p1 /boot/efi
</pre></td></tr></tbody></table></code></div></div>

<p>I reinstalled grub.</p>

<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="go">sudo grub-install --efi-directory=/boot/efi /dev/nvme0n1
Installing for x86_64-efi platform.
Installation finished. No error reported.
</span></pre></td></tr></tbody></table></code></div></div>

<p>Yeah, it worked, but it was still mounting the old partition.</p>

<p>I checked a couple of things and my <code class="language-plaintext highlighter-rouge">/etc/fstab</code> mounts <code class="language-plaintext highlighter-rouge">/boot/efi</code> using UUID, and
I didn’t change the UUID for that partition. That was the issue.</p>

<p>I installed the <code class="language-plaintext highlighter-rouge">mtools</code> to use <code class="language-plaintext highlighter-rouge">mlabel</code> command<sup id="fnref:fat-uuid"><a href="#fn:fat-uuid" class="footnote" rel="footnote" role="doc-noteref">3</a></sup>.
First I was sure the partition was unmounted, then I ran:</p>

<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="go">mlabel -N CA0E5D9E -i /dev/nvme1n1p1 ::
</span></pre></td></tr></tbody></table></code></div></div>

<blockquote class="prompt-tip">
  <p>I wasn’t sure how those label are created, so I just picked up the original and changed one 
character.</p>
</blockquote>

<p>Now it works as expected, and that’s how I started to use my new disk.</p>

<h2 id="extra"><span class="me-2">Extra</span><a href="#extra" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<p>I booted on Windows and from there I modified its partition to use the whole disk.</p>

<p>I have used <em>AOMEI Partition Assistant Standard</em> and I liked.</p>

<p>You can download it <a href="https://www.diskpart.com/free-partition-manager.html">here</a></p>

<p>After the installation the first screen is this one:
<a href="/assets/img/luks-lvm/iniciando.png" class="popup img-link shimmer"><img src="/assets/img/luks-lvm/iniciando.png" alt="AOMEI Partition Assistant Standar" loading="lazy"></a>
<em>AOMEI first menu</em></p>

<p>Now to delete a partition, just click it and the option would be on the right column.</p>

<p><a href="/assets/img/luks-lvm/opciones.png" class="popup img-link shimmer"><img src="/assets/img/luks-lvm/opciones.png" alt="AOMEI options" loading="lazy"></a>
<em>Options column</em></p>

<p>I deleted the old <code class="language-plaintext highlighter-rouge">EFI</code>, <code class="language-plaintext highlighter-rouge">/boot</code> and <code class="language-plaintext highlighter-rouge">LUKS</code>; then I will move the <code class="language-plaintext highlighter-rouge">C:</code> partition and extend it.</p>

<p>After deleting, moving, and merging, the disk looked like this.
<a href="/assets/img/luks-lvm/final.png" class="popup img-link shimmer"><img src="/assets/img/luks-lvm/final.png" alt="New layout" loading="lazy"></a>
<em>Final partitions in the old disk</em></p>

<p>Now I applied the changes. I chose to <em>Restart into Windows PE mode</em> when it asked me.</p>

<blockquote class="prompt-tip">
  <p>I had issues restarting into the Windows PE mode, basically UEFI was selecting the wrong disk and Windows was booting normally. After a couple of tries, I selected the other disk and the PE mode started.</p>
</blockquote>

<p>Final <code class="language-plaintext highlighter-rouge">lsblk</code></p>
<div class="language-terminal highlighter-rouge"><div class="code-header">
        <span data-label-text="Terminal"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="gp">adolfo@debian-desktop:~$</span><span class="w"> </span>lsblk 
<span class="go">NAME                MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINTS
nvme0n1             259:0    0   1.8T  0 disk  
├─nvme0n1p1         259:2    0   100M  0 part  /boot/efi
├─nvme0n1p2         259:3    0   2.4G  0 part  /boot
└─nvme0n1p3         259:4    0   1.8T  0 part  
  └─nvme0n1p5_crypt 253:0    0   1.8T  0 crypt 
    ├─debian-root   253:1    0   100G  0 lvm   /
    └─debian-home   253:2    0   1.7T  0 lvm   /home
nvme1n1             259:1    0 931.5G  0 disk  
├─nvme1n1p1         259:5    0    16M  0 part  
├─nvme1n1p2         259:6    0   931G  0 part  
└─nvme1n1p3         259:7    0   509M  0 part 
</span></pre></td></tr></tbody></table></code></div></div>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:balena">
      <p><a href="https://etcher.balena.io/#download-etcher">https://etcher.balena.io/#download-etcher</a> <a href="#fnref:balena" class="reversefootnote" role="doc-backlink">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:luks-uuid">
      <p><a href="https://scriptthe.net/2016/08/24/changing-uuids-on-luks-encrypted-partitions/">https://scriptthe.net/2016/08/24/changing-uuids-on-luks-encrypted-partitions/</a> <a href="#fnref:luks-uuid" class="reversefootnote" role="doc-backlink">&#8617;&#xfe0e;</a></p>
    </li>
    <li id="fn:fat-uuid">
      <p><a href="https://superuser.com/a/1744103">https://superuser.com/a/1744103</a> <a href="#fnref:fat-uuid" class="reversefootnote" role="doc-backlink">&#8617;&#xfe0e;</a></p>
    </li>
  </ol>
</div>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/tinkering/">tinkering</a>
      </div>
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/debian/"
            class="post-tag no-text-decoration"
          >debian</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=How%20I%20expanded%20my%20LUKS%20and%20LV%20(Logical%20Volumes)%20partitions%20-%20Jes%C3%BAs%20Adolfo%20Parra%20Parra&url=https%3A%2F%2Fadolfoparra.com%2Fposts%2Fexpanding-luks-lvm%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=https%3A%2F%2Fadolfoparra.com%2Fposts%2Fexpanding-luks-lvm%2F&text=How%20I%20expanded%20my%20LUKS%20and%20LV%20(Logical%20Volumes)%20partitions%20-%20Jes%C3%BAs%20Adolfo%20Parra%20Parra" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/installing-pihole/">Installing Pi-hole in my raspberry pi</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/google-console-ii/">Trying Google Search Console part II</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/expanding-luks-lvm/">How I expanded my LUKS and LV (Logical Volumes) partitions</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/surviving-mars/">Fixing Surviving Mars</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/changing-battery/">Changing battery of robot vaccum Lefant M213S</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/debian/">debian</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ereader/">ereader</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/raspberry-pi/">raspberry-pi</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/repairs/">repairs</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/dns/">dns</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/firmware/">firmware</a>
      
    </div>
  </section>


            </div>

            
              
              






  <div class="toc-border-cover z-3"></div>
  <section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4">
    <h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->















  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">Further Reading</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/surviving-mars/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1748664000"
  data-df="ll"
  
>
  May 31, 2025
</time>

              <h4 class="pt-0 my-2">Fixing Surviving Mars</h4>
              <div class="text-muted">
                <p>The problem I noticed the linux native version of Surviving Mars has issues with my dual monitor setup. Basically it disables my vertical one but that is not all, it also has some glitches.  The ob...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/disabling-wifi/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1703826000"
  data-df="ll"
  
>
  Dec 29, 2023
</time>

              <h4 class="pt-0 my-2">Disabling Wifi and Bluetooth in RPi 4</h4>
              <div class="text-muted">
                <p>I started to use my raspberry pi 4 not long ago. As I use Debian the obvious choise  was to flash the Raspberry Pi Debian image into the SD card.  Now, as I’m planning connect it with a ethernet ca...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/google-console-ii/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1754712000"
  data-df="ll"
  
>
  Aug  9, 2025
</time>

              <h4 class="pt-0 my-2">Trying Google Search Console part II</h4>
              <div class="text-muted">
                <p>I am still learning about Google Search Console, and after some time I finally got some information.   Like performance: ![Performance chart](/assets/img/google-search-console/performance.png) _I c...</p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/google-console/"
      class="btn btn-outline-primary"
      aria-label="Older"
    >
      <p>Trying Google Search Console</p>
    </a>
  

  
    <a
      href="/posts/google-console-ii/"
      class="btn btn-outline-primary"
      aria-label="Newer"
    >
      <p>Trying Google Search Console part II</p>
    </a>
  
</nav>

            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2025</time>

    
      <a href="https://twitter.com/4d0lfo">Jesús Adolfo Parra Parra</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted."
      >All rights reserved.</span>
    
  </p>

  <p>Using the <a
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="v7.3.1"
        href="https://github.com/cotes2020/jekyll-theme-chirpy"
        target="_blank"
        rel="noopener"
      >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/debian/">debian</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ereader/">ereader</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/raspberry-pi/">raspberry-pi</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/repairs/">repairs</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/dns/">dns</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/firmware/">firmware</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- Embedded scripts -->

    
      
      <!-- The comments switcher -->


    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  
  document.addEventListener('DOMContentLoaded', () => {
    SimpleJekyllSearch({
      searchInput: document.getElementById('search-input'),
      resultsContainer: document.getElementById('search-results'),
      json: '/assets/js/data/search.json',
      searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{content}</p>  </article>',
      noResultsText: '<p class="mt-5">Oops! No results found.</p>',
      templateMiddleware: function(prop, value, template) {
        if (prop === 'categories') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
          }
        }

        if (prop === 'tags') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
          }
        }
      }
    });
  });
</script>

  </body>
</html>

